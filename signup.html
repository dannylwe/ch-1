<!DOCTYPE html>
<html>
<head>
	<title>SendIT -- Sign up</title>
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
</head>
<body>
	<header>
		
	</header>

	<!-- sign up form -->
	<div class= "sign-up" id="up-sign">
		<h1>Sign Up</h1>
		<p>Sign up to the best parcel delivery in the world</p>	
		<form class="submission-form">
			<label>Name</label>
			<input type="text" id="Name" placeholder="Full names" required>
			<br>
			<label>Email</label>
			<input type="email" id="Email" placeholder="Enter e-mail" required>
			<br>
			<label>Password</label>
			<input type="password" id="psw" placeholder="Enter password" required>
			<br>
			<label>Confirm Password</label>
			<input type="password" id="c-psw" placeholder="Confirm Password" required>
			<br>
			<label>Username</label>
			<input type="text" id="username" placeholder="username" required>
			<br>
			<label>handphone</label>
			<input type="tel" id="handphone" placeholder="phone number" required>
			<br>
			<input type="button" id="submit-sign-up" value="Submit" class="button-btn" 
			id="btn-signup" onclick="send()">
		</form>

	</div>

	<footer>
		
	</footer>

	<script>
		function send(){
			const signUp = "https://challenge3andela.herokuapp.com/api/v1/auth/user"
			
			var email = document.getElementById("Email").value;
			var username = document.getElementById("username").value;
			var password = document.getElementById("psw").value;
			var cpassword = document.getElementById("c-psw").value;
			var phone = document.getElementById("handphone").value;
			var name = document.getElementById("Name").value;
			console.log(email, username, password, phone, name);

			if (password == username) {
				console.log("psw err");
				alert("password cannot be the same as username");
				return process.exit(1);
			}
			
			if (password != cpassword){
				console.log("no mtc");
				alert("passwords do not match");
				return process.exit(1);
			}
			
			// var strongRegex = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})");
			// var mediumRegex = new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{7,})");
			
			// function tPassword(password){
			// 	if(strongRegex.test(password)){
			// 		console.log("str psw");
			// 	} else if (mediumRegex.test(password)){
			// 		console.log("mdm psw");
			// 	} else {
			// 		console.log("gg");
			// 		alert("enter a password with 1 uppercase, special, integer of atleast lenght 7");
			// 		return process.exit(1);
			// 	}
			// }
			
			//need to change backend password column to allow specials
			//tPassword(password)

			// const signDetails = {
			// 	"email": email,
			// 	"password": password,
			// 	"handphone": parseInt(phone), //772504771
			// 	"username": username
			// };

			const signDetails = {
				"email": "user1@gmail.com",
				"password": "abcdefgh",
				"handphone": 772504771,
				"username": "danny1"
			};
			
			signupFetch();

			function signupFetch(){
            fetch(signUp, {
                method: 'POST',
                headers:{
                    Accept: "application/json",
                    'Content-Type': "application/json; charset=UTF-8",
                },
                body:JSON.stringify(signDetails)
            }).then(res => res.text())
			.then(response => {if (!response.ok)
				{console.log("gg2", response); alert(response)} else{
					window.location.href = "login.html"
				}
			})
			.catch(err => console.log(err));
			}


		};
		
	</script>


</body>
</html>